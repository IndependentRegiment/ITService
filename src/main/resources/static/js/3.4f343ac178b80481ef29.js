webpackJsonp([3],{DL2b:function(e,t){},WxyF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("P9l9"),o={data:function(){return{typeList:[],wayList:[],dialogVisible:!1,newType:"",parentType:"",value:[],value1:[],setKesLabel:{value:"typeId",label:"typeName",expandTrigger:"hover"},wayProp:{value:"serviceId",label:"serviceName",expandTrigger:"hover"},sortData:{typeId:0,typeName:"",typeNo:0},inputValue:""}},mounted:function(){this.getTypeList(),this.getWay()},methods:{showBtn:function(e,t){this.sortData.typeNo=t,this.sortData.typeId=e,console.log(this.sortData)},handleInputConfirm:function(e,t){var a=this;this.sortData.typeNo=t,this.sortData.typeId=e,Object(n.d)(this.sortData).then(function(e){console.log(e),a.getTypeList(),a.$message({message:"修改成功",type:"success"})})},getWay:function(){var e=this;Object(n.o)().then(function(t){console.log(t),200===t.code&&(e.wayList=t.data)})},getTypeList:function(){var e=this;Object(n.n)().then(function(t){console.log(t),e.typeList=e.getTreeData(t.data)})},getTreeData:function(e){for(var t=0;t<e.length;t++)e[t].problemList.length<1?e[t].problemList=void 0:this.getTreeData(e[t].problemList);return e},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(a){t.value1=[],t.value=[],t.newType="",e()}).catch(function(e){})},addType:function(){this.dialogVisible=!0},handleChange:function(e){console.log(e)},handleWayChange:function(e){console.log(e[0])},confirmAdd:function(){var e=this,t=this.value[0];void 0===t&&(t="");var a=this.value1[0];""!==this.wayId&&""!==this.newType?Object(n.a)(t,this.newType,a).then(function(t){console.log(t),200===t.code&&(e.$message({message:"添加成功",type:"success"}),e.getTypeList()),e.value1=[],e.value=[],e.newType="",e.dialogVisible=!1}):this.$message({message:"必填项不能为空",type:"warning"})},delType:function(e){var t=this;console.log(e),Object(n.b)(e).then(function(e){console.log(e),200===e.code&&(t.$message({message:"删除成功",type:"success"}),t.getTypeList())})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:e.addType}},[e._v("添加故障类型")]),e._v(" "),a("el-card",{staticClass:"box-card"},[a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.typeList,"row-key":"typeId",border:"","tree-props":{children:"problemList",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{label:"类型排序",width:"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"input-new-tag",attrs:{size:"small"},on:{focus:function(a){return e.showBtn(t.row.typeId,t.row.typeNo)},blur:function(a){return e.handleInputConfirm(t.row.typeId,t.row.typeNo)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t.row.typeId,t.row.typeNo)}},model:{value:t.row.typeNo,callback:function(a){e.$set(t.row,"typeNo",a)},expression:"props.row.typeNo"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"故障类型",width:"500"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentId",label:"级别"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1===t.row.parentId?a("el-tag",[e._v("一级")]):a("el-tag",{attrs:{type:"success"}},[e._v("二级")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1===t.row.parentId?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.delType(t.row.typeId)}}},[e._v("删除")]):a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.delType(t.row.typeId)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加类型",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"text"},[a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v("故障分类：\n          ")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{},[a("el-cascader",{attrs:{options:e.wayList,props:e.wayProp,clearable:""},on:{change:e.handleWayChange},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"text"},[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 故障名称:\n          ")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.newType,callback:function(t){e.newType=t},expression:"newType"}})],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"text"},[a("span",{staticStyle:{color:"white"}},[e._v(" * ")]),e._v("父级分类：\n          ")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{},[a("el-cascader",{attrs:{options:e.typeList,props:e.setKesLabel,clearable:""},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmAdd}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(o,s,!1,function(e){a("DL2b")},"data-v-ebbca564",null);t.default=l.exports}});
//# sourceMappingURL=3.4f343ac178b80481ef29.js.map