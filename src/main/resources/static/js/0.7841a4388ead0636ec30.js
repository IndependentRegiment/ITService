webpackJsonp([0],{P9l9:function(t,e,a){"use strict";var n=a("mtWM"),s=a.n(n);function o(t){var e=s.a.create({timeout:5e3});return e.interceptors.request.use(function(t){return t},function(t){console.log(t)}),e.interceptors.response.use(function(t){return t.data},function(t){console.log(t)}),e(t)}e.i=function(t){return o({method:"post",url:"/api1.0/manage/card/list",data:t})},e.h=function(t){return o({method:"post",header:{"content-type":"application/json"},url:"/api1.0/card/assist/list",data:{deal:t}})},e.c=function(t,e){return o({method:"post",header:{"content-type":"application/json"},url:"/api1.0/manage/update/card",data:{deal:e,cardId:t}})},e.n=function(){return o({method:"post",url:"/api1.0/card/problem/list",data:{}})},e.o=function(){return o({method:"post",url:"/api1.0/manage/problem/service",data:{}})},e.a=function(t,e,a){return o({method:"post",url:"/api1.0/manage/create/problem",data:{typeId:t,typeName:e,serviceId:a}})},e.b=function(t){return o({method:"post",url:"/api1.0/manage/delete/problem",data:{typeId:t}})},e.m=function(){return o({method:"post",url:"/api1.0/manage/user/role",data:{}})},e.k=function(t){return o({method:"post",url:"/api1.0/manage/user/list",data:t})},e.e=function(t){return o({method:"post",url:"/api1.0/manage/update/user",data:t})},e.d=function(t){return o({method:"post",url:"/api1.0/manage/update/problem",data:t})},e.g=function(t){return o({method:"post",url:"/api1.0/manage/card/count",data:t})},e.j=function(t){return o({method:"post",url:"/api1.0/manage/user/comment",data:t})},e.q=function(t){return o({method:"post",url:"/api1.0/manage/service/count",data:t})},e.l=function(t){return o({method:"post",url:"/api1.0/manage/eng/comment",data:t})},e.p=function(t){return o({method:"post",url:"/api1.0/manage/send/email",data:{cardList:t}})},e.f=function(t,e){return o({method:"post",url:"/api1.0/user/update/status",data:{openId:t,statusId:e}})}},SC19:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("P9l9"),s={data:function(){return{list:[],queryInfo:{pageNo:1,pageSize:10,applyName:"",status:"",createTime:"",endTime:""},total:0,dealList:[],dialogVisible:!1,name:"",value:"",cardId:"",applyName:"",statusList:[{id:"未处理",name:"未处理"},{id:"处理中",name:"处理中"},{id:"已处理",name:"已处理"},{id:"未评价",name:"未评价"},{id:"已评价",name:"已评价"}],handleTime:"",isShow:!1,selectList:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},value2:"",nowTime:"",valueName:""}},watch:{selectList:function(t,e){t.length>0?this.isShow=!0:this.isShow=!1}},filters:{dataFormat:function(t,e,a){if(null!==e){t=t.replace(/-/g,"/"),e=e.replace(/-/g,"/"),a=a.toLowerCase();var n=new Date(t),s=new Date(e),o=1;switch(a){case"second":o=1e3;break;case"minute":o=6e4;break;case"hour":o=36e5;break;case"day":o=864e5}return parseInt((s.getTime()-n.getTime())/parseInt(o))+"分钟"}return""}},mounted:function(){this.queryInfo.status=this.$route.query.type,this.queryInfo.createTime=this.$route.query.createTime,this.queryInfo.endTime=this.$route.query.endTime,console.log(this.queryInfo),this.nowTime=new Date,console.log(this.nowTime),this.getList()},methods:{dateChange:function(t){null!==t?(this.queryInfo.createTime=t.toString().split(",")[0],this.queryInfo.endTime=t.toString().split(",")[1],this.getList()):(this.queryInfo.createTime="",this.queryInfo.endTime="",this.getList())},customColorMethod:function(t){return 100===t?"#8DC63F":t>=80?"#F37B1D":t>=60?"#FBBD08":"#E54D42"},format:function(t){return 100===t?"100":""+t},search:function(){console.log(this.applyName),this.queryInfo.applyName=this.applyName,null!==this.value2&&this.value2.length>0&&(console.log(this.value2),this.queryInfo.createTime=this.value2[0],this.queryInfo.endTime=this.value2[1]),console.log(this.queryInfo),this.getList()},getList:function(){var t=this;console.log(this.queryInfo);var e=this.queryInfo;Object(n.i)(e).then(function(e){console.log(e),t.list=e.data.cardList,t.total=e.data.totalCount}),this.applyName=""},handleEdit:function(t,e){var a=this;console.log(e.deal),this.dialogVisible=!0,this.name=e.deal,this.cardId=e.cardId,Object(n.h)(this.name).then(function(t){console.log(t),200===t.code&&(console.log("编辑"+t),a.dealList=t.data)})},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},editDeal:function(){var t=this;console.log(this.valueName);var e=this.valueName,a=this.cardId;Object(n.c)(a,e).then(function(e){console.log(e),200===e.code&&(t.$message({message:"修改成功",type:"success"}),t.cardId="",t.valueName="",t.getList())}),this.dialogVisible=!1},handleSizeChange:function(t){this.queryInfo.pageSize=t,this.getList()},handleCurrentChange:function(t){this.queryInfo.pageNo=t,this.getList()},handleChange:function(t){this.queryInfo.status=t,this.getList()},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.selectList=t},sendMail:function(){var t=[];console.log(this.selectList),this.selectList.findIndex(function(t){return null===t.satisfaction&&"已处理"===t.status})>=0?(console.log("未评价"),this.selectList.forEach(function(e){t.push(e.cardId)}),console.log(t),Object(n.p)(t).then(function(t){console.log(t)})):this.$message({message:"请选择未评价工单！",type:"warning"})}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"top"},[n("el-select",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请选择状态",clearable:""},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.statusList,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}),1),t._v(" "),n("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入姓名"},model:{value:t.applyName,callback:function(e){t.applyName=e},expression:"applyName"}}),t._v(" "),n("el-date-picker",{staticStyle:{width:"400px","margin-right":"20px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,"default-value":t.nowTime,"value-format":"yyyy-MM-dd"},on:{change:t.dateChange},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}}),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"send",staticStyle:{display:"flex","padding-left":"10px"}},[n("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.toggleSelection()}}},[t._v("取消选择")]),t._v(" "),n("el-button",{attrs:{type:"success",icon:"el-icon-message"},on:{click:t.sendMail}},[t._v("发送")])],1)],1),t._v(" "),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,height:"600","max-width":"1000"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{label:"工单号",prop:"cardId"}}),t._v(" "),n("el-table-column",{attrs:{label:"申请人",prop:"applyName"}}),t._v(" "),n("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return["未处理"===e.row.status?n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.row.status))]):"处理中"===e.row.status?n("el-tag",{attrs:{type:"info"}},[t._v(t._s(e.row.status))]):"已处理"===e.row.status?n("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.status))]):"未评价"===e.row.status?n("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.row.status))]):n("el-tag",[t._v(t._s(e.row.status))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"评分",prop:"satisfaction",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.satisfaction?n("div",[n("el-progress",{attrs:{percentage:Number(e.row.satisfaction),format:t.format,color:t.customColorMethod}})],1):n("div",[t._v("暂无评分")])]}}])}),t._v(" "),n("el-table-column",{staticClass:"time",attrs:{label:"处理时间",prop:"solution"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("dataFormat")(e.row.createTime,e.row.endTime,"minute"))+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"故障类型",prop:"problemType"}}),t._v(" "),n("el-table-column",{attrs:{label:"工程师",prop:"deal","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.assistName?n("div",{staticClass:"deal-item"},[n("div",{staticClass:"name-text"},[t._v(t._s(e.row.deal))]),t._v(" "),n("img",{staticClass:"help-img",attrs:{src:a("UMSs")}}),t._v(" "),n("div",{staticClass:"name-text"},[t._v(t._s(e.row.assistName))])]):n("div",[t._v(t._s(e.row.deal))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"故障描述",prop:"description","min-width":"200px"}}),t._v(" "),n("el-table-column",{attrs:{label:"故障原因",prop:"reason"}}),t._v(" "),n("el-table-column",{attrs:{label:"故障解决方案",prop:"solution"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"editBtn",attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{"current-page":t.queryInfo.pageNo,"page-sizes":[1,2,5,10],"page-size":t.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),n("el-dialog",{attrs:{title:"修改工程师",visible:t.dialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"content"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("div",{},[t._v("工程师")])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{},[t._v(t._s(t.name))])])],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("div",{staticClass:"text"},[t._v("修改工程师")])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.valueName,callback:function(e){t.valueName=e},expression:"valueName"}},t._l(t.dealList,function(t,e){return n("el-option",{key:e,attrs:{label:t.userName,value:t.openId}})}),1)],1)])],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editDeal()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var i=a("VU/8")(s,o,!1,function(t){a("px9/")},"data-v-3a1bac36",null);e.default=i.exports},UMSs:function(t,e){t.exports="data:image/png;base64,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"},"px9/":function(t,e){}});
//# sourceMappingURL=0.7841a4388ead0636ec30.js.map